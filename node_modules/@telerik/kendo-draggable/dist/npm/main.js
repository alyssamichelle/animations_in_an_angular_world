'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var proxy = function (a, b) { return function (e) { return b(a(e)); }; };

var bind = function (el, event, callback) { return el.addEventListener && el.addEventListener(event, callback); };

var unbind = function (el, event, callback) { return el.removeEventListener && el.removeEventListener(event, callback); };

var noop = function () { /* empty */ };

var touchRegExp = /touch/;

// 300ms is the usual mouse interval;
// // However, an underpowered mobile device under a heavy load may queue mouse events for a longer period.
var IGNORE_MOUSE_TIMEOUT = 2000;

function normalizeEvent(e) {
    if (e.type.match(touchRegExp)) {
        return {
            pageX: e.changedTouches[0].pageX,
            pageY: e.changedTouches[0].pageY,
            type: e.type,
            originalEvent: e
        };
    }

    return {
        pageX: e.pageX,
        pageY: e.pageY,
        offsetX: e.offsetX,
        offsetY: e.offsetY,
        type: e.type,
        ctrlKey: e.ctrlKey,
        shiftKey: e.shiftKey,
        altKey: e.altKey,
        originalEvent: e
    };
}

var Draggable = function Draggable(ref) {
    var this$1 = this;
    var press = ref.press; if ( press === void 0 ) press = noop;
    var drag = ref.drag; if ( drag === void 0 ) drag = noop;
    var release = ref.release; if ( release === void 0 ) release = noop;
    var mouseOnly = ref.mouseOnly; if ( mouseOnly === void 0 ) mouseOnly = false;

    this._pressHandler = proxy(normalizeEvent, press);
    this._dragHandler = proxy(normalizeEvent, drag);
    this._releaseHandler = proxy(normalizeEvent, release);
    this._ignoreMouse = false;
    this._mouseOnly = mouseOnly;
    this._touchAction;

    this._touchstart = function (e) {
        if (e.touches.length === 1) {
            this$1._pressHandler(e);
        }
    };

    this._touchmove = function (e) {
        if (e.touches.length === 1) {
            this$1._dragHandler(e);
        }
    };

    this._touchend = function (e) {
        // the last finger has been lifted, and the user is not doing gesture.
        // there might be a better way to handle this.
        if (e.touches.length === 0 && e.changedTouches.length === 1) {
            this$1._releaseHandler(e);
            this$1._ignoreMouse = true;
            setTimeout(this$1._restoreMouse, IGNORE_MOUSE_TIMEOUT);
        }
    };

    this._restoreMouse = function () {
        this$1._ignoreMouse = false;
    };

    this._mousedown = function (e) {
        var which = e.which;

        if ((which && which > 1) || this$1._ignoreMouse) {
            return;
        }

        bind(document, "mousemove", this$1._mousemove);
        bind(document, "mouseup", this$1._mouseup);
        this$1._pressHandler(e);
    };

    this._mousemove = function (e) {
        this$1._dragHandler(e);
    };

    this._mouseup = function (e) {
        unbind(document, "mousemove", this$1._mousemove);
        unbind(document, "mouseup", this$1._mouseup);
        this$1._releaseHandler(e);
    };

    this._pointerdown = function (e) {
        if (e.isPrimary && e.button === 0) {
            bind(this$1._element, "pointermove", this$1._pointermove);
            bind(this$1._element, "pointerup", this$1._pointerup);

            this$1._touchAction = e.target.style.touchAction;
            e.target.style.touchAction = "none";
            e.target.setPointerCapture(e.pointerId);

            this$1._pressHandler(e);
        }
    };

    this._pointermove = function (e) {
        if (e.isPrimary) {
            this$1._dragHandler(e);
        }
    };

    this._pointerup = function (e) {
        if (e.isPrimary) {
            unbind(this$1._element, "pointermove", this$1._pointermove);
            unbind(this$1._element, "pointerup", this$1._pointerup);

            e.target.style.touchAction = this$1._touchAction;
            e.target.releasePointerCapture(e.pointerId);

            this$1._releaseHandler(e);
        }
    };
};

Draggable.supportPointerEvent = function supportPointerEvent () {
    return (typeof window !== 'undefined') && window.PointerEvent;
};

Draggable.prototype.bindTo = function bindTo (element) {
    if (element === this._element) {
        return;
    }

    if (this._element) {
        this._unbindFromCurrent();
    }

    this._element = element;
    this._bindToCurrent();
};

Draggable.prototype._bindToCurrent = function _bindToCurrent () {
    var element = this._element;

    if (this._usePointers()) {
        bind(element, "pointerdown", this._pointerdown);
        return;
    }

    bind(element, "mousedown", this._mousedown);

    if (!this._mouseOnly) {
        bind(element, "touchstart", this._touchstart);
        bind(element, "touchmove", this._touchmove);
        bind(element, "touchend", this._touchend);
    }
};

Draggable.prototype._unbindFromCurrent = function _unbindFromCurrent () {
    var element = this._element;

    if (this._usePointers()) {
        unbind(element, "pointerdown", this._pointerdown);
        unbind(element, "pointermove", this._pointermove);
        unbind(element, "pointerup", this._pointerup);
        return;
    }

    unbind(element, "mousedown", this._mousedown);

    if (!this._mouseOnly) {
        unbind(element, "touchstart", this._touchstart);
        unbind(element, "touchmove", this._touchmove);
        unbind(element, "touchend", this._touchend);
    }
};

Draggable.prototype._usePointers = function _usePointers () {
    return !this._mouseOnly && Draggable.supportPointerEvent();
};

Draggable.prototype.destroy = function destroy () {
    this._unbindFromCurrent();
    this._element = null;
};

// Re-export as "default" field to address a bug
// where the ES Module is imported by CommonJS code.
//
// See https://github.com/telerik/kendo-angular/issues/1314
Draggable.default = Draggable;

exports.Draggable = Draggable;
exports['default'] = Draggable;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9ob21lL3RyYXZpcy9idWlsZC90ZWxlcmlrL2tlbmRvLWRyYWdnYWJsZS9zcmMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcm94eSA9IChhLCBiKSA9PiAoZSkgPT4gYihhKGUpKTtcblxuY29uc3QgYmluZCA9IChlbCwgZXZlbnQsIGNhbGxiYWNrKSA9PlxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIgJiYgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xuXG5jb25zdCB1bmJpbmQgPSAoZWwsIGV2ZW50LCBjYWxsYmFjaykgPT5cbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyICYmIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcblxuY29uc3Qgbm9vcCA9ICgpID0+IHsgLyogZW1wdHkgKi8gfTtcblxuY29uc3QgdG91Y2hSZWdFeHAgPSAvdG91Y2gvO1xuXG4vLyAzMDBtcyBpcyB0aGUgdXN1YWwgbW91c2UgaW50ZXJ2YWw7XG4vLyAvLyBIb3dldmVyLCBhbiB1bmRlcnBvd2VyZWQgbW9iaWxlIGRldmljZSB1bmRlciBhIGhlYXZ5IGxvYWQgbWF5IHF1ZXVlIG1vdXNlIGV2ZW50cyBmb3IgYSBsb25nZXIgcGVyaW9kLlxuY29uc3QgSUdOT1JFX01PVVNFX1RJTUVPVVQgPSAyMDAwO1xuXG5mdW5jdGlvbiBub3JtYWxpemVFdmVudChlKSB7XG4gICAgaWYgKGUudHlwZS5tYXRjaCh0b3VjaFJlZ0V4cCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhZ2VYOiBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLFxuICAgICAgICAgICAgcGFnZVk6IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVksXG4gICAgICAgICAgICB0eXBlOiBlLnR5cGUsXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGFnZVg6IGUucGFnZVgsXG4gICAgICAgIHBhZ2VZOiBlLnBhZ2VZLFxuICAgICAgICBvZmZzZXRYOiBlLm9mZnNldFgsXG4gICAgICAgIG9mZnNldFk6IGUub2Zmc2V0WSxcbiAgICAgICAgdHlwZTogZS50eXBlLFxuICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5LFxuICAgICAgICBhbHRLZXk6IGUuYWx0S2V5LFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBlXG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIERyYWdnYWJsZSB7XG4gICAgc3RhdGljIHN1cHBvcnRQb2ludGVyRXZlbnQoKSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpICYmIHdpbmRvdy5Qb2ludGVyRXZlbnQ7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoeyBwcmVzcyA9IG5vb3AsIGRyYWcgPSBub29wLCByZWxlYXNlID0gbm9vcCwgbW91c2VPbmx5ID0gZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9wcmVzc0hhbmRsZXIgPSBwcm94eShub3JtYWxpemVFdmVudCwgcHJlc3MpO1xuICAgICAgICB0aGlzLl9kcmFnSGFuZGxlciA9IHByb3h5KG5vcm1hbGl6ZUV2ZW50LCBkcmFnKTtcbiAgICAgICAgdGhpcy5fcmVsZWFzZUhhbmRsZXIgPSBwcm94eShub3JtYWxpemVFdmVudCwgcmVsZWFzZSk7XG4gICAgICAgIHRoaXMuX2lnbm9yZU1vdXNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdXNlT25seSA9IG1vdXNlT25seTtcbiAgICAgICAgdGhpcy5fdG91Y2hBY3Rpb247XG5cbiAgICAgICAgdGhpcy5fdG91Y2hzdGFydCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXNzSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl90b3VjaG1vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl90b3VjaGVuZCA9IChlKSA9PiB7XG4gICAgICAgICAgICAvLyB0aGUgbGFzdCBmaW5nZXIgaGFzIGJlZW4gbGlmdGVkLCBhbmQgdGhlIHVzZXIgaXMgbm90IGRvaW5nIGdlc3R1cmUuXG4gICAgICAgICAgICAvLyB0aGVyZSBtaWdodCBiZSBhIGJldHRlciB3YXkgdG8gaGFuZGxlIHRoaXMuXG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMCAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VIYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lnbm9yZU1vdXNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuX3Jlc3RvcmVNb3VzZSwgSUdOT1JFX01PVVNFX1RJTUVPVVQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3Jlc3RvcmVNb3VzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2lnbm9yZU1vdXNlID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgd2hpY2ggfSA9IGU7XG5cbiAgICAgICAgICAgIGlmICgod2hpY2ggJiYgd2hpY2ggPiAxKSB8fCB0aGlzLl9pZ25vcmVNb3VzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmluZChkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgdGhpcy5fbW91c2Vtb3ZlKTtcbiAgICAgICAgICAgIGJpbmQoZG9jdW1lbnQsIFwibW91c2V1cFwiLCB0aGlzLl9tb3VzZXVwKTtcbiAgICAgICAgICAgIHRoaXMuX3ByZXNzSGFuZGxlcihlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9tb3VzZW1vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZHJhZ0hhbmRsZXIoZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fbW91c2V1cCA9IChlKSA9PiB7XG4gICAgICAgICAgICB1bmJpbmQoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIHRoaXMuX21vdXNlbW92ZSk7XG4gICAgICAgICAgICB1bmJpbmQoZG9jdW1lbnQsIFwibW91c2V1cFwiLCB0aGlzLl9tb3VzZXVwKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VIYW5kbGVyKGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3BvaW50ZXJkb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmlzUHJpbWFyeSAmJiBlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJpbmQodGhpcy5fZWxlbWVudCwgXCJwb2ludGVybW92ZVwiLCB0aGlzLl9wb2ludGVybW92ZSk7XG4gICAgICAgICAgICAgICAgYmluZCh0aGlzLl9lbGVtZW50LCBcInBvaW50ZXJ1cFwiLCB0aGlzLl9wb2ludGVydXApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fdG91Y2hBY3Rpb24gPSBlLnRhcmdldC5zdHlsZS50b3VjaEFjdGlvbjtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXNzSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9wb2ludGVybW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5pc1ByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9wb2ludGVydXAgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuaXNQcmltYXJ5KSB7XG4gICAgICAgICAgICAgICAgdW5iaW5kKHRoaXMuX2VsZW1lbnQsIFwicG9pbnRlcm1vdmVcIiwgdGhpcy5fcG9pbnRlcm1vdmUpO1xuICAgICAgICAgICAgICAgIHVuYmluZCh0aGlzLl9lbGVtZW50LCBcInBvaW50ZXJ1cFwiLCB0aGlzLl9wb2ludGVydXApO1xuXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUudG91Y2hBY3Rpb24gPSB0aGlzLl90b3VjaEFjdGlvbjtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsZWFzZUhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYmluZFRvKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9lbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl91bmJpbmRGcm9tQ3VycmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2JpbmRUb0N1cnJlbnQoKTtcbiAgICB9XG5cbiAgICBfYmluZFRvQ3VycmVudCgpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2VsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3VzZVBvaW50ZXJzKCkpIHtcbiAgICAgICAgICAgIGJpbmQoZWxlbWVudCwgXCJwb2ludGVyZG93blwiLCB0aGlzLl9wb2ludGVyZG93bik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiaW5kKGVsZW1lbnQsIFwibW91c2Vkb3duXCIsIHRoaXMuX21vdXNlZG93bik7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9tb3VzZU9ubHkpIHtcbiAgICAgICAgICAgIGJpbmQoZWxlbWVudCwgXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX3RvdWNoc3RhcnQpO1xuICAgICAgICAgICAgYmluZChlbGVtZW50LCBcInRvdWNobW92ZVwiLCB0aGlzLl90b3VjaG1vdmUpO1xuICAgICAgICAgICAgYmluZChlbGVtZW50LCBcInRvdWNoZW5kXCIsIHRoaXMuX3RvdWNoZW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF91bmJpbmRGcm9tQ3VycmVudCgpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2VsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3VzZVBvaW50ZXJzKCkpIHtcbiAgICAgICAgICAgIHVuYmluZChlbGVtZW50LCBcInBvaW50ZXJkb3duXCIsIHRoaXMuX3BvaW50ZXJkb3duKTtcbiAgICAgICAgICAgIHVuYmluZChlbGVtZW50LCBcInBvaW50ZXJtb3ZlXCIsIHRoaXMuX3BvaW50ZXJtb3ZlKTtcbiAgICAgICAgICAgIHVuYmluZChlbGVtZW50LCBcInBvaW50ZXJ1cFwiLCB0aGlzLl9wb2ludGVydXApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5iaW5kKGVsZW1lbnQsIFwibW91c2Vkb3duXCIsIHRoaXMuX21vdXNlZG93bik7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9tb3VzZU9ubHkpIHtcbiAgICAgICAgICAgIHVuYmluZChlbGVtZW50LCBcInRvdWNoc3RhcnRcIiwgdGhpcy5fdG91Y2hzdGFydCk7XG4gICAgICAgICAgICB1bmJpbmQoZWxlbWVudCwgXCJ0b3VjaG1vdmVcIiwgdGhpcy5fdG91Y2htb3ZlKTtcbiAgICAgICAgICAgIHVuYmluZChlbGVtZW50LCBcInRvdWNoZW5kXCIsIHRoaXMuX3RvdWNoZW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF91c2VQb2ludGVycygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLl9tb3VzZU9ubHkgJiYgRHJhZ2dhYmxlLnN1cHBvcnRQb2ludGVyRXZlbnQoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl91bmJpbmRGcm9tQ3VycmVudCgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG59XG5cbi8vIFJlLWV4cG9ydCBhcyBcImRlZmF1bHRcIiBmaWVsZCB0byBhZGRyZXNzIGEgYnVnXG4vLyB3aGVyZSB0aGUgRVMgTW9kdWxlIGlzIGltcG9ydGVkIGJ5IENvbW1vbkpTIGNvZGUuXG4vL1xuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLWFuZ3VsYXIvaXNzdWVzLzEzMTRcbkRyYWdnYWJsZS5kZWZhdWx0ID0gRHJhZ2dhYmxlO1xuXG4vLyBSb2xsdXAgd29uJ3Qgb3V0cHV0IGV4cG9ydHNbJ2RlZmF1bHQnXSBvdGhlcndpc2VcbmV4cG9ydCBkZWZhdWx0IERyYWdnYWJsZTtcblxuIl0sIm5hbWVzIjpbImNvbnN0IiwidGhpcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBQSxJQUFNLEtBQUssR0FBRyxVQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBRyxVQUFDLENBQUMsRUFBRSxTQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBQSxDQUFDOztBQUV2Q0EsSUFBTSxJQUFJLEdBQUcsVUFBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxTQUMvQixFQUFFLENBQUMsZ0JBQWdCLElBQUks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